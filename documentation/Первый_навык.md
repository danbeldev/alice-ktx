## Первый навык

Прежде чем приступить к разработке навыка для Алисы, важно ознакомиться с [официальной документацией](https://yandex.ru/dev/dialogs/alice/doc/) и понять принцип работы навыков.

### Первые шаги

```kotlin
implementation("io.github.danbeldev:alice-ktx:{version}")
```

Этот кодовый фрагмент иллюстрирует создание и запуск навыка с использованием библиотеки для работы с сервером на базе [Ktor](https://ktor.io).
Навык обрабатывает сообщения и отвечает на них в зависимости от состояния сессии.

```kotlin
fun main() {
    val skill = skill {
        id = ""
        webServer = ktorWebServer {
            port = 8080
            path = "/alice"
        }

        dispatch {
            message({ message.session.new }) {
                response {
                    text = "Привет!"
                }
            }

            message {
                response {
                    text = message.request.originalUtterance.toString()
                }
            }
        }
    }   
}
```

- `id` - Уникальный идентификатор скилла. Оставьте пустым, если не требуется уникальный идентификатор.
- `webServer` - Конфигурация веб-сервера с использованием Ktor.
- `port` - Порт, на котором будет запущен сервер. В данном случае используется порт 8080.
- `path` - Путь, по которому сервер будет доступен. В данном случае это /alice.

#### Диспетчеризация сообщений
```kotlin
message({ message.session.new }) {
    response {
        text = "Привет!"
    }
}
```
Этот блок кода обрабатывает новые сессии. Если сессия новая `message.session.new`, то в ответ отправляется текст "Привет!".

#### Обработка всех остальных сообщений
```kotlin
message {
    response {
        text = message.request.originalUtterance.toString()
    }
}
```
Этот блок кода обрабатывает все остальные сообщения. В ответ отправляется оригинальный текст запроса пользователя.

#### Запускает сконфигурированный скилл.

```kotlin
skill.run()
```

### Примеры
- [Echo.kt](../examples/src/main/kotlin/com/github/examples/Echo.kt)

### [Мидлвари](Мидлвари.md)